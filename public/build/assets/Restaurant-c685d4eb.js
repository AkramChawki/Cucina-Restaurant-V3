import{r as o,i as x,W as I,j as f,a as e,f as O}from"./app-b733fe48.js";import{b as v,D as $,I as M,y as j,l as F,X as k,f as W,M as H,h as K,p as Y,d as _,e as V,R as X,r as Z,g as T}from"./description-bb170c4a.js";function q(t){var s;let a=(s=t==null?void 0:t.form)!=null?s:t.closest("form");if(a){for(let n of a.elements)if(n.tagName==="INPUT"&&n.type==="submit"||n.tagName==="BUTTON"&&n.type==="submit"||n.nodeName==="INPUT"&&n.type==="image"){n.click();return}}}function J(t,s,a){let[n,d]=o.useState(a),l=t!==void 0,i=o.useRef(l),c=o.useRef(!1),r=o.useRef(!1);return l&&!i.current&&!c.current?(c.current=!0,i.current=l,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!l&&i.current&&!r.current&&(r.current=!0,i.current=l,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[l?t:n,v(p=>(l||d(p),s==null?void 0:s(p)))]}let P=o.createContext(null);function R(){let t=o.useContext(P);if(t===null){let s=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(s,R),s}return t}function Q(){let[t,s]=o.useState([]);return[t.length>0?t.join(" "):void 0,o.useMemo(()=>function(a){let n=v(l=>(s(i=>[...i,l]),()=>s(i=>{let c=i.slice(),r=c.indexOf(l);return r!==-1&&c.splice(r,1),c}))),d=o.useMemo(()=>({register:n,slot:a.slot,name:a.name,props:a.props}),[n,a.slot,a.name,a.props]);return x.createElement(P.Provider,{value:d},a.children)},[s])]}let ee="label";function te(t,s){let a=M(),{id:n=`headlessui-label-${a}`,passive:d=!1,...l}=t,i=R(),c=j(s);F(()=>i.register(n),[n,i.register]);let r={ref:c,...i.props,id:n};return d&&("onClick"in r&&(delete r.htmlFor,delete r.onClick),"onClick"in l&&delete l.onClick),k({ourProps:r,theirProps:l,slot:i.slot||{},defaultTag:ee,name:i.name||"Label"})}let ne=$(te),re=Object.assign(ne,{}),E=o.createContext(null);E.displayName="GroupContext";let ae=o.Fragment;function le(t){var s;let[a,n]=o.useState(null),[d,l]=Q(),[i,c]=H(),r=o.useMemo(()=>({switch:a,setSwitch:n,labelledby:d,describedby:i}),[a,n,d,i]),p={},m=t;return x.createElement(c,{name:"Switch.Description"},x.createElement(l,{name:"Switch.Label",props:{htmlFor:(s=r.switch)==null?void 0:s.id,onClick(h){a&&(h.currentTarget.tagName==="LABEL"&&h.preventDefault(),a.click(),a.focus({preventScroll:!0}))}}},x.createElement(E.Provider,{value:r},k({ourProps:p,theirProps:m,defaultTag:ae,name:"Switch.Group"}))))}let se="button";function ie(t,s){let a=M(),{id:n=`headlessui-switch-${a}`,checked:d,defaultChecked:l=!1,onChange:i,name:c,value:r,form:p,...m}=t,h=o.useContext(E),b=o.useRef(null),w=j(b,s,h===null?null:h.setSwitch),[y,N]=J(d,i,l),C=v(()=>N==null?void 0:N(!y)),z=v(u=>{if(Z(u.currentTarget))return u.preventDefault();u.preventDefault(),C()}),D=v(u=>{u.key===T.Space?(u.preventDefault(),C()):u.key===T.Enter&&q(u.currentTarget)}),A=v(u=>u.preventDefault()),B=o.useMemo(()=>({checked:y}),[y]),U={id:n,ref:w,role:"switch",type:K(t,b),tabIndex:0,"aria-checked":y,"aria-labelledby":h==null?void 0:h.labelledby,"aria-describedby":h==null?void 0:h.describedby,onClick:z,onKeyUp:D,onKeyPress:A},G=Y();return o.useEffect(()=>{var u;let S=(u=b.current)==null?void 0:u.closest("form");S&&l!==void 0&&G.addEventListener(S,"reset",()=>{N(l)})},[b,N]),x.createElement(x.Fragment,null,c!=null&&y&&x.createElement(_,{features:V.Hidden,...X({as:"input",type:"checkbox",hidden:!0,readOnly:!0,form:p,checked:y,name:c,value:r})}),k({ourProps:U,theirProps:m,slot:B,defaultTag:se,name:"Switch"}))}let oe=$(ie),ce=le,L=Object.assign(oe,{Group:ce,Label:re,Description:W});function g(...t){return t.filter(Boolean).join(" ")}function me({restaurant:t,products:s}){const a=t.name.toLowerCase(),[n,d]=o.useState(t.visible),{post:l}=I();o.useEffect(()=>{d(t.visible)},[t.visible]);const i=()=>{l(`/restaurant/${t.id}/toggle-visibility`,{onSuccess:r=>{d(r.visible)},onError:r=>{console.error(r)}})},c=(r,p)=>{O.post(`/product/${r}/toggle-restaurant`,{restaurant_name:a,add_restaurant:p},{onSuccess:()=>{},onError:m=>{console.error(m)}})};return f("div",{className:"container mx-auto sm:px-6 lg:px-8",children:[e("div",{className:"bg-white px-4 py-5 border-b border-gray-200 sm:px-6",children:f("div",{className:"-ml-4 -mt-2 flex items-center justify-between flex-wrap sm:flex-nowrap",children:[e("div",{className:"ml-4 mt-2",children:e("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:t.name})}),e("div",{className:"ml-4 mt-2 flex-shrink-0",children:f(L,{checked:n==1,onChange:i,className:g(n?"bg-green-600":"bg-gray-200","relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"),children:[e("span",{className:"sr-only",children:"Use setting"}),f("span",{className:g(n?"translate-x-5":"translate-x-0","pointer-events-none relative inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200"),children:[e("span",{className:g(n?"opacity-0 ease-out duration-100":"opacity-100 ease-in duration-200","absolute inset-0 h-full w-full flex items-center justify-center transition-opacity"),"aria-hidden":"true",children:e("svg",{className:"h-3 w-3 text-gray-400",fill:"none",viewBox:"0 0 12 12",children:e("path",{d:"M4 8l2-2m0 0l2-2M6 6L4 4m2 2l2 2",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})}),e("span",{className:g(n?"opacity-100 ease-in duration-200":"opacity-0 ease-out duration-100","absolute inset-0 h-full w-full flex items-center justify-center transition-opacity"),"aria-hidden":"true",children:e("svg",{className:"h-3 w-3 text-green-600",fill:"currentColor",viewBox:"0 0 12 12",children:e("path",{d:"M3.707 5.293a1 1 0 00-1.414 1.414l1.414-1.414zM5 8l-.707.707a1 1 0 001.414 0L5 8zm4.707-3.293a1 1 0 00-1.414-1.414l1.414 1.414zm-7.414 2l2 2 1.414-1.414-2-2-1.414 1.414zm3.414 2l4-4-1.414-1.414-4 4 1.414 1.414z"})})})]})]})})]})}),e("div",{className:"flex flex-col",children:e("div",{className:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:e("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:e("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:f("table",{className:"min-w-full divide-y divide-gray-200",children:[e("thead",{className:"bg-gray-50",children:f("tr",{children:[e("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Image"}),e("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e("th",{scope:"col",className:"relative px-6 py-3",children:e("span",{className:"sr-only",children:"Edit"})})]})}),e("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(r=>{const p=Array.isArray(r.restaurant)&&r.restaurant.includes(a),[m,h]=o.useState(p),b=async()=>{const w=!m;h(w),await c(r.id,w)};return f("tr",{children:[e("td",{className:"px-6 py-4 whitespace-nowrap",children:e("div",{className:"flex items-center",children:e("div",{className:"flex-shrink-0 h-10 w-10",children:e("img",{className:"h-10 w-10 rounded-full",src:"",alt:""})})})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:e("div",{className:"text-sm text-gray-900",children:r.name})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:e("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Active"})}),e("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:f(L,{checked:m,onChange:b,className:g(m?"bg-green-600":"bg-gray-200","relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"),children:[e("span",{className:"sr-only",children:"Use setting"}),f("span",{className:g(m?"translate-x-5":"translate-x-0","pointer-events-none relative inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200"),children:[e("span",{className:g(m?"opacity-0 ease-out duration-100":"opacity-100 ease-in duration-200","absolute inset-0 h-full w-full flex items-center justify-center transition-opacity"),"aria-hidden":"true",children:e("svg",{className:"h-3 w-3 text-gray-400",fill:"none",viewBox:"0 0 12 12",children:e("path",{d:"M4 8l2-2m0 0l2-2M6 6L4 4m2 2l2 2",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})}),e("span",{className:g(m?"opacity-100 ease-in duration-200":"opacity-0 ease-out duration-100","absolute inset-0 h-full w-full flex items-center justify-center transition-opacity"),"aria-hidden":"true",children:e("svg",{className:"h-3 w-3 text-green-600",fill:"currentColor",viewBox:"0 0 12 12",children:e("path",{d:"M3.707 5.293a1 1 0 00-1.414 1.414l1.414-1.414zM5 8l-.707.707a1 1 0 001.414 0L5 8zm4.707-3.293a1 1 0 00-1.414-1.414l1.414 1.414zm-7.414 2l2 2 1.414-1.414-2-2-1.414 1.414z"})})})]})]})})]},r.id)})})]})})})})})]})}export{me as default};
