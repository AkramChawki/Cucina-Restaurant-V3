import{q as v,r as N,W as w,j as e,a,d as C}from"./app-562fdf99.js";import"./lodash-7d821b79.js";function k(){const{auth:h}=v().props,g=new URLSearchParams(window.location.search).get("restau"),d=[{lot:"Gaz",frequence:"Chaque mois",travaux:"Contrôle des 4 Feux et friteuse, nettoyage, reglage des feux..."},{lot:"Froid",frequence:"Chaque mois",travaux:"Nettoyage des batteries des Armoires, contrôle des thermostats, contrôle des portes et Joints ..."},{lot:"Chambres froides",frequence:"Chaque mois",travaux:"Contrôle des Groupes, contrôle Gel, contrôle des joints et portes, thermostats..."},{lot:"Hotte Four",frequence:"Chaque mois",travaux:"Nettoyage et ramonage de la gaine"},{lot:"Climatisation",frequence:"Chaque mois",travaux:"Nettoyage des filtres de clim, contrôle des groupes"},{lot:"Desinsectisation et deratisation",frequence:"Chaque semaine",travaux:"Injection produit, fumiginisation..."}],[o,i]=N.useState([{lot:"",personne:"",detailTravaux:"",signatureControleur:""}]),{data:m,setData:u,post:x,processing:p,errors:j}=w({name:h.user.name,date:new Date().toISOString().split("T")[0],restau:g,type:"maintenance_preventive",data:{mois:new Date().toISOString().slice(0,7),rows:o}}),f=()=>{const t=[...o,{lot:"",personne:"",detailTravaux:"",signatureControleur:""}];i(t),c(t)},c=t=>{u(s=>({...s,data:{...s.data,rows:t}}))},l=(t,s,r)=>{const n=[...o];n[t][s]=r,i(n),c(n)},y=t=>{const s=o.filter((r,n)=>n!==t);i(s),c(s)},b=t=>{u(s=>({...s,data:{...s.data,mois:t}}))};return e("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 px-4 py-10",children:e("form",{onSubmit:t=>{t.preventDefault(),x("/fiche-controle/form")},className:"space-y-8",children:a("div",{className:"space-y-6",children:[e("div",{className:"flex justify-between items-start",children:a("div",{children:[e("h2",{className:"text-xl font-semibold",children:"Fiche Maintenance Preventive"}),a("div",{className:"mt-4 space-y-4",children:[a("div",{className:"flex space-x-4 items-center",children:[e("label",{className:"block text-sm font-medium text-gray-700",children:"Mois"}),e("input",{type:"month",value:m.data.mois,onChange:t=>b(t.target.value),className:"shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm border-gray-300 rounded-md"})]}),a("div",{className:"flex space-x-4 items-center",children:[e("label",{className:"block text-sm font-medium text-gray-700",children:"Restaurant"}),e("input",{type:"text",value:m.restau,disabled:!0,className:"shadow-sm bg-gray-50 sm:text-sm border-gray-300 rounded-md"})]})]})]})}),a("div",{className:"mt-8",children:[e("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Cette Fiche concerne les Lots (Gaz, Chambres froides, Armoires positives, Hotte Four, Climatisation, Deratisation et Desinsectisation)"}),e("div",{className:"overflow-x-auto",children:a("table",{className:"min-w-full divide-y divide-gray-300",children:[e("thead",{className:"bg-gray-50",children:a("tr",{children:[e("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900",children:"Lot"}),e("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Frequence"}),e("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Travaux A prevoir"})]})}),e("tbody",{className:"divide-y divide-gray-200 bg-white",children:d.map((t,s)=>a("tr",{children:[e("td",{className:"py-4 pl-4 pr-3 text-sm text-gray-900",children:t.lot}),e("td",{className:"px-3 py-4 text-sm text-gray-500",children:t.frequence}),e("td",{className:"px-3 py-4 text-sm text-gray-500",children:t.travaux})]},s))})]})})]}),a("div",{className:"mt-8",children:[e("div",{className:"overflow-x-auto",children:a("table",{className:"min-w-full divide-y divide-gray-300",children:[e("thead",{className:"bg-gray-50",children:a("tr",{children:[e("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900",children:"LOT"}),e("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Personne"}),e("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Detail Travaux"}),e("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Signature controleur"}),e("th",{scope:"col",className:"relative py-3.5 pl-3 pr-4 sm:pr-6",children:e("span",{className:"sr-only",children:"Actions"})})]})}),e("tbody",{className:"divide-y divide-gray-200 bg-white",children:o.map((t,s)=>a("tr",{children:[e("td",{className:"whitespace-nowrap py-4 pl-4 pr-3",children:a("select",{value:t.lot,onChange:r=>l(s,"lot",r.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm",children:[e("option",{value:"",children:"Sélectionner un lot"}),d.map((r,n)=>e("option",{value:r.lot,children:r.lot},n))]})}),e("td",{className:"whitespace-nowrap px-3 py-4",children:e("input",{type:"text",value:t.personne,onChange:r=>l(s,"personne",r.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm"})}),e("td",{className:"px-3 py-4",children:e("input",{type:"text",value:t.detailTravaux,onChange:r=>l(s,"detailTravaux",r.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm"})}),e("td",{className:"whitespace-nowrap px-3 py-4",children:e("input",{type:"text",value:t.signatureControleur,onChange:r=>l(s,"signatureControleur",r.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm"})}),e("td",{className:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6",children:o.length>1&&e("button",{type:"button",onClick:()=>y(s),className:"text-red-600 hover:text-red-900",children:"Supprimer"})})]},s))})]})}),e("div",{className:"mt-4",children:e("button",{type:"button",onClick:f,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Ajouter une ligne"})})]}),a("div",{className:"pt-8 flex justify-end space-x-3",children:[e(C,{href:"/",className:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Annuler"}),e("button",{type:"submit",disabled:p,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:p?"Enregistrement...":"Enregistrer"})]})]})})})}export{k as default};
