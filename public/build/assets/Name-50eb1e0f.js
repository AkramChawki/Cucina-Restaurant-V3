import{r as m,j as e,a,d as l,F as x}from"./app-2c4bad47.js";function p({restaurants:n,auth:r}){const[o,f]=m.useState("");console.log("Auth User Restau:",r.user.restau),console.log("Available Restaurants:",n);const u=m.useMemo(()=>{if(!r.user.restau)return console.log("No restau field in auth.user"),[];if(!Array.isArray(r.user.restau)){console.log("Restau is not an array:",typeof r.user.restau);try{const s=JSON.parse(r.user.restau);Array.isArray(s)&&(console.log("Successfully parsed restau:",s),r.user.restau=s)}catch(s){return console.log("Failed to parse restau:",s),[]}}const t=n.filter(s=>{const i=s.name.toLowerCase();return r.user.restau.some(c=>{const d=i.includes(c.toLowerCase());return console.log(`Checking ${i} against ${c}: ${d}`),d})});return console.log("Filtered Restaurants:",t),t},[n,r.user.restau]),g=t=>{f(t.target.value)};return u.length?e("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 flex h-screen",children:a("div",{className:"m-auto w-[90%] relative",children:[a("div",{className:"border border-gray-300 rounded-md px-3 py-2 shadow-sm focus-within:ring-1 focus-within:ring-[#73ac70] focus-within:border-[#73ac70]",children:[e("label",{htmlFor:"restaurant",className:"px-1 bg-white text-xs font-medium text-gray-900",children:"Votre restaurant"}),a("select",{value:o,onChange:g,id:"restaurant",name:"restaurant",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-[#90D88C] focus:border-[#90D88C] sm:text-sm rounded-md",children:[e("option",{value:"",children:"Selectionner le restaurant ..."}),u.map(t=>e("option",{value:t.name,children:t.name},t.id))]})]}),o!==""&&a(x,{children:[e(l,{href:`/restaurant?restau=${encodeURIComponent(o)}`,className:"inline-flex w-full mt-8 text-left items-center px-4 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-[#73ac70] hover:bg-[#0D3D33] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#90D88C]",children:"Suivant"}),e(l,{href:"/",className:"inline-flex w-full mt-2 text-left items-center px-4 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-[#73ac70] hover:bg-[#0D3D33] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#90D88C]",children:"Annuler"})]})]})}):e("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 flex h-screen",children:a("div",{className:"m-auto w-[90%] relative",children:[e("p",{className:"text-red-500",children:"Restaurant non trouv√©"}),e(l,{href:"/",className:"inline-flex w-full mt-2 text-left items-center px-4 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-[#73ac70] hover:bg-[#0D3D33] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#90D88C]",children:"Retour"})]})})}export{p as default};
