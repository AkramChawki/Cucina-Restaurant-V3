import{r as o,i as x,W as I,j as f,a as e,f as O}from"./app-ba49cff1.js";import{b as v,D as $,I as M,y as j,l as F,X as k,f as W,M as H,h as K,p as V,d as Y,e as _,R as X,r as Z,g as T}from"./description-78e98325.js";function q(n){var s;let a=(s=n==null?void 0:n.form)!=null?s:n.closest("form");if(a){for(let t of a.elements)if(t.tagName==="INPUT"&&t.type==="submit"||t.tagName==="BUTTON"&&t.type==="submit"||t.nodeName==="INPUT"&&t.type==="image"){t.click();return}}}function J(n,s,a){let[t,c]=o.useState(a),l=n!==void 0,i=o.useRef(l),d=o.useRef(!1),r=o.useRef(!1);return l&&!i.current&&!d.current?(d.current=!0,i.current=l,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!l&&i.current&&!r.current&&(r.current=!0,i.current=l,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[l?n:t,v(u=>(l||c(u),s==null?void 0:s(u)))]}let P=o.createContext(null);function R(){let n=o.useContext(P);if(n===null){let s=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(s,R),s}return n}function Q(){let[n,s]=o.useState([]);return[n.length>0?n.join(" "):void 0,o.useMemo(()=>function(a){let t=v(l=>(s(i=>[...i,l]),()=>s(i=>{let d=i.slice(),r=d.indexOf(l);return r!==-1&&d.splice(r,1),d}))),c=o.useMemo(()=>({register:t,slot:a.slot,name:a.name,props:a.props}),[t,a.slot,a.name,a.props]);return x.createElement(P.Provider,{value:c},a.children)},[s])]}let ee="label";function te(n,s){let a=M(),{id:t=`headlessui-label-${a}`,passive:c=!1,...l}=n,i=R(),d=j(s);F(()=>i.register(t),[t,i.register]);let r={ref:d,...i.props,id:t};return c&&("onClick"in r&&(delete r.htmlFor,delete r.onClick),"onClick"in l&&delete l.onClick),k({ourProps:r,theirProps:l,slot:i.slot||{},defaultTag:ee,name:i.name||"Label"})}let ne=$(te),re=Object.assign(ne,{}),E=o.createContext(null);E.displayName="GroupContext";let ae=o.Fragment;function le(n){var s;let[a,t]=o.useState(null),[c,l]=Q(),[i,d]=H(),r=o.useMemo(()=>({switch:a,setSwitch:t,labelledby:c,describedby:i}),[a,t,c,i]),u={},p=n;return x.createElement(d,{name:"Switch.Description"},x.createElement(l,{name:"Switch.Label",props:{htmlFor:(s=r.switch)==null?void 0:s.id,onClick(h){a&&(h.currentTarget.tagName==="LABEL"&&h.preventDefault(),a.click(),a.focus({preventScroll:!0}))}}},x.createElement(E.Provider,{value:r},k({ourProps:u,theirProps:p,defaultTag:ae,name:"Switch.Group"}))))}let se="button";function ie(n,s){let a=M(),{id:t=`headlessui-switch-${a}`,checked:c,defaultChecked:l=!1,onChange:i,name:d,value:r,form:u,...p}=n,h=o.useContext(E),b=o.useRef(null),w=j(b,s,h===null?null:h.setSwitch),[y,N]=J(c,i,l),C=v(()=>N==null?void 0:N(!y)),z=v(m=>{if(Z(m.currentTarget))return m.preventDefault();m.preventDefault(),C()}),D=v(m=>{m.key===T.Space?(m.preventDefault(),C()):m.key===T.Enter&&q(m.currentTarget)}),A=v(m=>m.preventDefault()),B=o.useMemo(()=>({checked:y}),[y]),U={id:t,ref:w,role:"switch",type:K(n,b),tabIndex:0,"aria-checked":y,"aria-labelledby":h==null?void 0:h.labelledby,"aria-describedby":h==null?void 0:h.describedby,onClick:z,onKeyUp:D,onKeyPress:A},G=V();return o.useEffect(()=>{var m;let S=(m=b.current)==null?void 0:m.closest("form");S&&l!==void 0&&G.addEventListener(S,"reset",()=>{N(l)})},[b,N]),x.createElement(x.Fragment,null,d!=null&&y&&x.createElement(Y,{features:_.Hidden,...X({as:"input",type:"checkbox",hidden:!0,readOnly:!0,form:u,checked:y,name:d,value:r})}),k({ourProps:U,theirProps:p,slot:B,defaultTag:se,name:"Switch"}))}let oe=$(ie),ce=le,L=Object.assign(oe,{Group:ce,Label:re,Description:W});function g(...n){return n.filter(Boolean).join(" ")}function me({restaurant:n,products:s}){const a=n.name.toLowerCase(),[t,c]=o.useState(n.visible),{post:l}=I();o.useEffect(()=>{c(n.visible)},[n.visible]);const i=()=>{const r=t==1?0:1;c(r),l(`/restaurant/${n.id}/toggle-visibility`,{},{preserveState:!0,preserveScroll:!0,onSuccess:u=>{u.props.restaurant.visible!=r&&c(u.props.restaurant.visible)},onError:u=>{console.error(u),c(t)}})},d=(r,u)=>{O.post(`/product/${r}/toggle-restaurant`,{restaurant_name:a,add_restaurant:u},{onSuccess:()=>{},onError:p=>{console.error(p)}})};return f("div",{className:"container mx-auto sm:px-6 lg:px-8",children:[e("div",{className:"bg-white px-4 py-5 border-b border-gray-200 sm:px-6",children:f("div",{className:"-ml-4 -mt-2 flex items-center justify-between flex-wrap sm:flex-nowrap",children:[e("div",{className:"ml-4 mt-2",children:e("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:n.name})}),e("div",{className:"ml-4 mt-2 flex-shrink-0",children:f(L,{checked:t==1,onChange:i,className:g(t==1?"bg-green-600":"bg-gray-200","relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"),children:[e("span",{className:"sr-only",children:"Use setting"}),f("span",{className:g(t?"translate-x-5":"translate-x-0","pointer-events-none relative inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200"),children:[e("span",{className:g(t?"opacity-0 ease-out duration-100":"opacity-100 ease-in duration-200","absolute inset-0 h-full w-full flex items-center justify-center transition-opacity"),"aria-hidden":"true",children:e("svg",{className:"h-3 w-3 text-gray-400",fill:"none",viewBox:"0 0 12 12",children:e("path",{d:"M4 8l2-2m0 0l2-2M6 6L4 4m2 2l2 2",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})}),e("span",{className:g(t?"opacity-100 ease-in duration-200":"opacity-0 ease-out duration-100","absolute inset-0 h-full w-full flex items-center justify-center transition-opacity"),"aria-hidden":"true",children:e("svg",{className:"h-3 w-3 text-green-600",fill:"currentColor",viewBox:"0 0 12 12",children:e("path",{d:"M3.707 5.293a1 1 0 00-1.414 1.414l1.414-1.414zM5 8l-.707.707a1 1 0 001.414 0L5 8zm4.707-3.293a1 1 0 00-1.414-1.414l1.414 1.414zm-7.414 2l2 2 1.414-1.414-2-2-1.414 1.414zm3.414 2l4-4-1.414-1.414-4 4 1.414 1.414z"})})})]})]})})]})}),e("div",{className:"flex flex-col",children:e("div",{className:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:e("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:e("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:f("table",{className:"min-w-full divide-y divide-gray-200",children:[e("thead",{className:"bg-gray-50",children:f("tr",{children:[e("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Image"}),e("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e("th",{scope:"col",className:"relative px-6 py-3",children:e("span",{className:"sr-only",children:"Edit"})})]})}),e("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(r=>{const u=Array.isArray(r.restaurant)&&r.restaurant.includes(a),[p,h]=o.useState(u),b=async()=>{const w=!p;h(w),await d(r.id,w)};return f("tr",{children:[e("td",{className:"px-6 py-4 whitespace-nowrap",children:e("div",{className:"flex items-center",children:e("div",{className:"flex-shrink-0 h-10 w-10",children:e("img",{className:"h-10 w-10 rounded-full",src:"",alt:""})})})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:e("div",{className:"text-sm text-gray-900",children:r.name})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:e("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Active"})}),e("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:f(L,{checked:p,onChange:b,className:g(p?"bg-green-600":"bg-gray-200","relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"),children:[e("span",{className:"sr-only",children:"Use setting"}),f("span",{className:g(p?"translate-x-5":"translate-x-0","pointer-events-none relative inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200"),children:[e("span",{className:g(p?"opacity-0 ease-out duration-100":"opacity-100 ease-in duration-200","absolute inset-0 h-full w-full flex items-center justify-center transition-opacity"),"aria-hidden":"true",children:e("svg",{className:"h-3 w-3 text-gray-400",fill:"none",viewBox:"0 0 12 12",children:e("path",{d:"M4 8l2-2m0 0l2-2M6 6L4 4m2 2l2 2",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})}),e("span",{className:g(p?"opacity-100 ease-in duration-200":"opacity-0 ease-out duration-100","absolute inset-0 h-full w-full flex items-center justify-center transition-opacity"),"aria-hidden":"true",children:e("svg",{className:"h-3 w-3 text-green-600",fill:"currentColor",viewBox:"0 0 12 12",children:e("path",{d:"M3.707 5.293a1 1 0 00-1.414 1.414l1.414-1.414zM5 8l-.707.707a1 1 0 001.414 0L5 8zm4.707-3.293a1 1 0 00-1.414-1.414l1.414 1.414zm-7.414 2l2 2 1.414-1.414-2-2-1.414 1.414z"})})})]})]})})]},r.id)})})]})})})})})]})}export{me as default};
