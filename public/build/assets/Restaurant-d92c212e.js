import{r as o,i as x,W as I,j as f,a as e,f as O}from"./app-517722f1.js";import{b as v,D as $,I as M,y as j,l as F,X as k,f as W,M as H,h as K,p as Y,d as _,e as V,R as X,r as Z,g as T}from"./description-c112e9d6.js";function q(r){var s;let a=(s=r==null?void 0:r.form)!=null?s:r.closest("form");if(a){for(let t of a.elements)if(t.tagName==="INPUT"&&t.type==="submit"||t.tagName==="BUTTON"&&t.type==="submit"||t.nodeName==="INPUT"&&t.type==="image"){t.click();return}}}function J(r,s,a){let[t,u]=o.useState(a),l=r!==void 0,i=o.useRef(l),c=o.useRef(!1),n=o.useRef(!1);return l&&!i.current&&!c.current?(c.current=!0,i.current=l,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!l&&i.current&&!n.current&&(n.current=!0,i.current=l,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[l?r:t,v(p=>(l||u(p),s==null?void 0:s(p)))]}let P=o.createContext(null);function R(){let r=o.useContext(P);if(r===null){let s=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(s,R),s}return r}function Q(){let[r,s]=o.useState([]);return[r.length>0?r.join(" "):void 0,o.useMemo(()=>function(a){let t=v(l=>(s(i=>[...i,l]),()=>s(i=>{let c=i.slice(),n=c.indexOf(l);return n!==-1&&c.splice(n,1),c}))),u=o.useMemo(()=>({register:t,slot:a.slot,name:a.name,props:a.props}),[t,a.slot,a.name,a.props]);return x.createElement(P.Provider,{value:u},a.children)},[s])]}let ee="label";function te(r,s){let a=M(),{id:t=`headlessui-label-${a}`,passive:u=!1,...l}=r,i=R(),c=j(s);F(()=>i.register(t),[t,i.register]);let n={ref:c,...i.props,id:t};return u&&("onClick"in n&&(delete n.htmlFor,delete n.onClick),"onClick"in l&&delete l.onClick),k({ourProps:n,theirProps:l,slot:i.slot||{},defaultTag:ee,name:i.name||"Label"})}let ne=$(te),re=Object.assign(ne,{}),C=o.createContext(null);C.displayName="GroupContext";let ae=o.Fragment;function le(r){var s;let[a,t]=o.useState(null),[u,l]=Q(),[i,c]=H(),n=o.useMemo(()=>({switch:a,setSwitch:t,labelledby:u,describedby:i}),[a,t,u,i]),p={},m=r;return x.createElement(c,{name:"Switch.Description"},x.createElement(l,{name:"Switch.Label",props:{htmlFor:(s=n.switch)==null?void 0:s.id,onClick(h){a&&(h.currentTarget.tagName==="LABEL"&&h.preventDefault(),a.click(),a.focus({preventScroll:!0}))}}},x.createElement(C.Provider,{value:n},k({ourProps:p,theirProps:m,defaultTag:ae,name:"Switch.Group"}))))}let se="button";function ie(r,s){let a=M(),{id:t=`headlessui-switch-${a}`,checked:u,defaultChecked:l=!1,onChange:i,name:c,value:n,form:p,...m}=r,h=o.useContext(C),y=o.useRef(null),w=j(y,s,h===null?null:h.setSwitch),[b,N]=J(u,i,l),E=v(()=>N==null?void 0:N(!b)),z=v(d=>{if(Z(d.currentTarget))return d.preventDefault();d.preventDefault(),E()}),D=v(d=>{d.key===T.Space?(d.preventDefault(),E()):d.key===T.Enter&&q(d.currentTarget)}),A=v(d=>d.preventDefault()),B=o.useMemo(()=>({checked:b}),[b]),U={id:t,ref:w,role:"switch",type:K(r,y),tabIndex:0,"aria-checked":b,"aria-labelledby":h==null?void 0:h.labelledby,"aria-describedby":h==null?void 0:h.describedby,onClick:z,onKeyUp:D,onKeyPress:A},G=Y();return o.useEffect(()=>{var d;let S=(d=y.current)==null?void 0:d.closest("form");S&&l!==void 0&&G.addEventListener(S,"reset",()=>{N(l)})},[y,N]),x.createElement(x.Fragment,null,c!=null&&b&&x.createElement(_,{features:V.Hidden,...X({as:"input",type:"checkbox",hidden:!0,readOnly:!0,form:p,checked:b,name:c,value:n})}),k({ourProps:U,theirProps:m,slot:B,defaultTag:se,name:"Switch"}))}let oe=$(ie),ce=le,L=Object.assign(oe,{Group:ce,Label:re,Description:W});function g(...r){return r.filter(Boolean).join(" ")}function me({restaurant:r,products:s}){const a=r.name.toLowerCase(),[t,u]=o.useState(r.visible),{post:l}=I(),i=()=>{l(`/restaurant/${r.id}/toggle-visibility`,{onSuccess:()=>{u(n=>n==1?0:1)},onError:n=>{console.error(n)}})},c=(n,p)=>{O.post(`/product/${n}/toggle-restaurant`,{restaurant_name:a,add_restaurant:p},{onSuccess:()=>{},onError:m=>{console.error(m)}})};return f("div",{className:"container mx-auto sm:px-6 lg:px-8",children:[e("div",{className:"bg-white px-4 py-5 border-b border-gray-200 sm:px-6",children:f("div",{className:"-ml-4 -mt-2 flex items-center justify-between flex-wrap sm:flex-nowrap",children:[e("div",{className:"ml-4 mt-2",children:e("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:r.name})}),e("div",{className:"ml-4 mt-2 flex-shrink-0",children:f(L,{checked:t,onChange:i,className:g(t?"bg-green-600":"bg-gray-200","relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"),children:[e("span",{className:"sr-only",children:"Use setting"}),f("span",{className:g(t?"translate-x-5":"translate-x-0","pointer-events-none relative inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200"),children:[e("span",{className:g(t?"opacity-0 ease-out duration-100":"opacity-100 ease-in duration-200","absolute inset-0 h-full w-full flex items-center justify-center transition-opacity"),"aria-hidden":"true",children:e("svg",{className:"h-3 w-3 text-gray-400",fill:"none",viewBox:"0 0 12 12",children:e("path",{d:"M4 8l2-2m0 0l2-2M6 6L4 4m2 2l2 2",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})}),e("span",{className:g(t?"opacity-100 ease-in duration-200":"opacity-0 ease-out duration-100","absolute inset-0 h-full w-full flex items-center justify-center transition-opacity"),"aria-hidden":"true",children:e("svg",{className:"h-3 w-3 text-green-600",fill:"currentColor",viewBox:"0 0 12 12",children:e("path",{d:"M3.707 5.293a1 1 0 00-1.414 1.414l1.414-1.414zM5 8l-.707.707a1 1 0 001.414 0L5 8zm4.707-3.293a1 1 0 00-1.414-1.414l1.414 1.414zm-7.414 2l2 2 1.414-1.414-2-2-1.414 1.414zm3.414 2l4-4-1.414-1.414-4 4 1.414 1.414z"})})})]})]})})]})}),e("div",{className:"flex flex-col",children:e("div",{className:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:e("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:e("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:f("table",{className:"min-w-full divide-y divide-gray-200",children:[e("thead",{className:"bg-gray-50",children:f("tr",{children:[e("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Image"}),e("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e("th",{scope:"col",className:"relative px-6 py-3",children:e("span",{className:"sr-only",children:"Edit"})})]})}),e("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(n=>{const p=Array.isArray(n.restaurant)&&n.restaurant.includes(a),[m,h]=o.useState(p),y=async()=>{const w=!m;h(w),await c(n.id,w)};return f("tr",{children:[e("td",{className:"px-6 py-4 whitespace-nowrap",children:e("div",{className:"flex items-center",children:e("div",{className:"flex-shrink-0 h-10 w-10",children:e("img",{className:"h-10 w-10 rounded-full",src:"",alt:""})})})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:e("div",{className:"text-sm text-gray-900",children:n.name})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:e("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Active"})}),e("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:f(L,{checked:m,onChange:y,className:g(m?"bg-green-600":"bg-gray-200","relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"),children:[e("span",{className:"sr-only",children:"Use setting"}),f("span",{className:g(m?"translate-x-5":"translate-x-0","pointer-events-none relative inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200"),children:[e("span",{className:g(m?"opacity-0 ease-out duration-100":"opacity-100 ease-in duration-200","absolute inset-0 h-full w-full flex items-center justify-center transition-opacity"),"aria-hidden":"true",children:e("svg",{className:"h-3 w-3 text-gray-400",fill:"none",viewBox:"0 0 12 12",children:e("path",{d:"M4 8l2-2m0 0l2-2M6 6L4 4m2 2l2 2",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})}),e("span",{className:g(m?"opacity-100 ease-in duration-200":"opacity-0 ease-out duration-100","absolute inset-0 h-full w-full flex items-center justify-center transition-opacity"),"aria-hidden":"true",children:e("svg",{className:"h-3 w-3 text-green-600",fill:"currentColor",viewBox:"0 0 12 12",children:e("path",{d:"M3.707 5.293a1 1 0 00-1.414 1.414l1.414-1.414zM5 8l-.707.707a1 1 0 001.414 0L5 8zm4.707-3.293a1 1 0 00-1.414-1.414l1.414 1.414zm-7.414 2l2 2 1.414-1.414-2-2-1.414 1.414z"})})})]})]})})]},n.id)})})]})})})})})]})}export{me as default};
