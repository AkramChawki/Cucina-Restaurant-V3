import{q as b,r as y,W as v,j as e,a,d as w}from"./app-6e308e3f.js";import"./lodash-de6107e9.js";function R(){const{auth:p}=b().props,g=new URLSearchParams(window.location.search).get("restau"),[n,d]=y.useState([{lot:"",personne:"",date:"",detailTravaux:"",nbrHeures:""}]),{data:i,setData:m,post:h,processing:u,errors:T}=v({name:p.user.name,date:new Date().toISOString().split("T")[0],restau:g,type:"travaux",data:{rows:n}}),x=()=>{d([...n,{lot:"",personne:"",date:"",detailTravaux:"",nbrHeures:""}]),c([...n,{lot:"",personne:"",date:"",detailTravaux:"",nbrHeures:""}])},c=t=>{m(s=>({...s,data:{rows:t}}))},o=(t,s,r)=>{const l=[...n];l[t][s]=r,d(l),c(l)},f=t=>{const s=n.filter((r,l)=>l!==t);d(s),c(s)};return e("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 px-4 py-10",children:e("form",{onSubmit:t=>{t.preventDefault(),h("/fiche-controle/form")},className:"space-y-8",children:a("div",{className:"space-y-6",children:[e("div",{className:"flex justify-between items-start",children:a("div",{children:[e("h2",{className:"text-xl font-semibold",children:"Fiche Travaux"}),a("div",{className:"mt-4 space-y-4",children:[a("div",{className:"flex space-x-4 items-center",children:[e("label",{className:"block text-sm font-medium text-gray-700",children:"Date"}),e("input",{type:"date",value:i.date,onChange:t=>m("date",t.target.value),className:"shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm border-gray-300 rounded-md"})]}),a("div",{className:"flex space-x-4 items-center",children:[e("label",{className:"block text-sm font-medium text-gray-700",children:"Restaurant"}),e("input",{type:"text",value:i.restau,disabled:!0,className:"shadow-sm bg-gray-50 sm:text-sm border-gray-300 rounded-md"})]})]})]})}),a("div",{className:"mt-8",children:[e("div",{className:"overflow-x-auto",children:a("table",{className:"min-w-full divide-y divide-gray-300",children:[e("thead",{className:"bg-gray-50",children:a("tr",{children:[e("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900",children:"LOT"}),e("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Personne"}),e("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Date"}),e("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Detail Travaux"}),e("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Nbr Heures"}),e("th",{scope:"col",className:"relative py-3.5 pl-3 pr-4 sm:pr-6",children:e("span",{className:"sr-only",children:"Actions"})})]})}),e("tbody",{className:"divide-y divide-gray-200 bg-white",children:n.map((t,s)=>a("tr",{children:[e("td",{className:"whitespace-nowrap py-4 pl-4 pr-3",children:e("input",{type:"text",value:t.lot,onChange:r=>o(s,"lot",r.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm"})}),e("td",{className:"whitespace-nowrap px-3 py-4",children:e("input",{type:"text",value:t.personne,onChange:r=>o(s,"personne",r.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm"})}),e("td",{className:"whitespace-nowrap px-3 py-4",children:e("input",{type:"date",value:t.date,onChange:r=>o(s,"date",r.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm"})}),e("td",{className:"whitespace-nowrap px-3 py-4",children:e("input",{type:"text",value:t.detailTravaux,onChange:r=>o(s,"detailTravaux",r.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm"})}),e("td",{className:"whitespace-nowrap px-3 py-4",children:e("input",{type:"number",value:t.nbrHeures,onChange:r=>o(s,"nbrHeures",r.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm"})}),e("td",{className:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6",children:n.length>1&&e("button",{type:"button",onClick:()=>f(s),className:"text-red-600 hover:text-red-900",children:"Supprimer"})})]},s))})]})}),e("div",{className:"mt-4",children:e("button",{type:"button",onClick:x,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Ajouter une ligne"})})]}),a("div",{className:"pt-8 flex justify-end space-x-3",children:[e(w,{href:"/",className:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Annuler"}),e("button",{type:"submit",disabled:u,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:u?"Enregistrement...":"Enregistrer"})]})]})})})}export{R as default};
