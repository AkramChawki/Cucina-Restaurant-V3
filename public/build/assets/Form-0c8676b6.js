import{r as c,W as D,j as t,F as g,a as e,d as F}from"./app-73a60431.js";import{F as y}from"./Footer-030b6dec.js";function M({employe:a}){const[f,x]=c.useState(null),[v,b]=c.useState(null),[N,p]=c.useState(null),d={profile:c.useRef(null),front:c.useRef(null),back:c.useRef(null)},{data:n,setData:i,put:k,processing:w,errors:s}=D({first_name:(a==null?void 0:a.first_name)||"",last_name:(a==null?void 0:a.last_name)||"",DDN:(a==null?void 0:a.DDN)||"",telephone:(a==null?void 0:a.telephone)||"",address:(a==null?void 0:a.address)||"",city:(a==null?void 0:a.city)||"",country:(a==null?void 0:a.country)||"",marital_status:(a==null?void 0:a.marital_status)||"single",username:(a==null?void 0:a.username)||"",profile_photo:null,id_card_front:null,id_card_back:null,restau:(a==null?void 0:a.restau)||"",embauche:(a==null?void 0:a.embauche)||"",depart:(a==null?void 0:a.depart)||""});c.useEffect(()=>{a!=null&&a.profile_photo&&x(`https://restaurant.cucinanapoli.com/public/storage/${a.profile_photo}`),a!=null&&a.id_card_front&&b(`https://restaurant.cucinanapoli.com/public/storage/${a.id_card_front}`),a!=null&&a.id_card_back&&p(`https://restaurant.cucinanapoli.com/public/storage/${a.id_card_back}`)},[a]);const C=r=>{r.preventDefault(),k(route("employes.update",a.id),{preserveScroll:!0})},m=(r,l)=>{const u=r.target.files[0];if(!u)return;i(r.target.name,u);const _=new FileReader;_.onload=h=>{switch(l){case"profile":x(h.target.result);break;case"front":b(h.target.result);break;case"back":p(h.target.result);break}},_.readAsDataURL(u)},o=r=>{var l;(l=d[r].current)==null||l.click()};return t(g,{children:[e("div",{className:"container mx-auto max-w-7xl sm:px-6 lg:px-8 px-10 py-10",children:t("form",{onSubmit:C,encType:"multipart/form-data",className:"space-y-8 divide-y divide-gray-200",children:[e("div",{className:"space-y-8 divide-y divide-gray-200",children:t("div",{className:"pt-8",children:[t("div",{children:[e("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Information Personnel"}),e("p",{className:"mt-1 text-sm text-gray-500",children:"Utilisez une adresse permanente où vous pouvez recevoir du courrier."})]}),t("div",{className:"mt-6 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[t("div",{className:"sm:col-span-3",children:[e("label",{htmlFor:"first_name",className:"block text-sm font-medium text-gray-700",children:"Prénom"}),t("div",{className:"mt-1",children:[e("input",{type:"text",name:"first_name",id:"first_name",value:n.first_name,onChange:r=>i("first_name",r.target.value),className:"shadow-sm focus:ring-green-500 focus:border-green-500 block w-full sm:text-sm border-gray-300 rounded-md"}),s.first_name&&e("div",{className:"text-red-500 text-sm mt-1",children:s.first_name})]})]}),t("div",{className:"sm:col-span-3",children:[e("label",{htmlFor:"last_name",className:"block text-sm font-medium text-gray-700",children:"Nom"}),t("div",{className:"mt-1",children:[e("input",{type:"text",name:"last_name",id:"last_name",value:n.last_name,onChange:r=>i("last_name",r.target.value),className:"shadow-sm focus:ring-green-500 focus:border-green-500 block w-full sm:text-sm border-gray-300 rounded-md"}),s.last_name&&e("div",{className:"text-red-500 text-sm mt-1",children:s.last_name})]})]}),t("div",{className:"sm:col-span-3",children:[e("label",{htmlFor:"DDN",className:"block text-sm font-medium text-gray-700",children:"Date de Naissance"}),t("div",{className:"mt-1",children:[e("input",{type:"date",name:"DDN",id:"DDN",value:n.DDN,onChange:r=>i("DDN",r.target.value),className:"shadow-sm focus:ring-green-500 focus:border-green-500 block w-full sm:text-sm border-gray-300 rounded-md"}),s.DDN&&e("div",{className:"text-red-500 text-sm mt-1",children:s.DDN})]})]}),t("div",{className:"sm:col-span-3",children:[e("label",{htmlFor:"telephone",className:"block text-sm font-medium text-gray-700",children:"Telephone"}),t("div",{className:"mt-1",children:[e("input",{type:"text",name:"telephone",id:"telephone",value:n.telephone,onChange:r=>i("telephone",r.target.value),className:"shadow-sm focus:ring-green-500 focus:border-green-500 block w-full sm:text-sm border-gray-300 rounded-md"}),s.telephone&&e("div",{className:"text-red-500 text-sm mt-1",children:s.telephone})]})]}),t("div",{className:"sm:col-span-6",children:[e("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700",children:"Adresse"}),t("div",{className:"mt-1",children:[e("input",{type:"text",name:"address",id:"address",value:n.address,onChange:r=>i("address",r.target.value),className:"shadow-sm focus:ring-green-500 focus:border-green-500 block w-full sm:text-sm border-gray-300 rounded-md"}),s.address&&e("div",{className:"text-red-500 text-sm mt-1",children:s.address})]})]}),t("div",{className:"sm:col-span-3",children:[e("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700",children:"Ville"}),t("div",{className:"mt-1",children:[e("input",{type:"text",name:"city",id:"city",value:n.city,onChange:r=>i("city",r.target.value),className:"shadow-sm focus:ring-green-500 focus:border-green-500 block w-full sm:text-sm border-gray-300 rounded-md"}),s.city&&e("div",{className:"text-red-500 text-sm mt-1",children:s.city})]})]}),t("div",{className:"sm:col-span-3",children:[e("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700",children:"Pays"}),t("div",{className:"mt-1",children:[e("input",{type:"text",name:"country",id:"country",value:n.country,onChange:r=>i("country",r.target.value),className:"shadow-sm focus:ring-green-500 focus:border-green-500 block w-full sm:text-sm border-gray-300 rounded-md"}),s.country&&e("div",{className:"text-red-500 text-sm mt-1",children:s.country})]})]}),t("div",{className:"sm:col-span-3",children:[e("label",{htmlFor:"marital_status",className:"block text-sm font-medium text-gray-700",children:"Situation Familiale"}),t("div",{className:"mt-1",children:[t("select",{id:"marital_status",name:"marital_status",value:n.marital_status,onChange:r=>i("marital_status",r.target.value),className:"shadow-sm focus:ring-green-500 focus:border-green-500 block w-full sm:text-sm border-gray-300 rounded-md",children:[e("option",{value:"single",children:"Célibataire"}),e("option",{value:"married",children:"Marié(e)"}),e("option",{value:"other",children:"Autre"})]}),s.marital_status&&e("div",{className:"text-red-500 text-sm mt-1",children:s.marital_status})]})]}),t("div",{className:"sm:col-span-3",children:[e("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),t("div",{className:"mt-1 flex rounded-md shadow-sm",children:[e("input",{type:"text",name:"username",id:"username",value:n.username,onChange:r=>i("username",r.target.value),className:"flex-1 focus:ring-green-500 focus:border-green-500 block w-full min-w-0 rounded-none rounded-r-md sm:text-sm border-gray-300"}),e("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 sm:text-sm",children:"@cucinanapoli.com"})]}),s.username&&e("div",{className:"text-red-500 text-sm mt-1",children:s.username})]}),t("div",{className:"sm:col-span-6",children:[e("label",{className:"block text-sm font-medium text-gray-700",children:"Photo de profil"}),t("div",{className:"mt-1 flex items-center",children:[e("div",{onClick:()=>o("profile"),className:"cursor-pointer",children:f?e("img",{src:f,alt:"Profile preview",className:"h-24 w-24 rounded-full object-cover"}):e("span",{className:"h-24 w-24 rounded-full overflow-hidden bg-gray-100 flex items-center justify-center",children:e("svg",{className:"h-full w-full text-gray-300",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z"})})})}),e("input",{ref:d.profile,type:"file",name:"profile_photo",onChange:r=>m(r,"profile"),className:"hidden",accept:"image/*"}),s.profile_photo&&e("div",{className:"text-red-500 text-sm ml-4",children:s.profile_photo})]})]}),t("div",{className:"sm:col-span-3",children:[e("label",{className:"block text-sm font-medium text-gray-700",children:"CIN Recto"}),e("div",{onClick:()=>o("front"),className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md cursor-pointer hover:border-green-500",children:e("div",{className:"space-y-1 text-center",children:v?e("img",{src:v,alt:"ID card front preview",className:"mx-auto h-32 w-auto"}):t(g,{children:[e("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),e("div",{className:"flex text-sm text-gray-600",children:e("span",{className:"relative cursor-pointer bg-white rounded-md font-medium text-green-600 hover:text-green-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-green-500",children:"Télécharger un fichier"})}),e("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF jusqu'à 10MB"})]})})}),e("input",{ref:d.front,type:"file",name:"id_card_front",onChange:r=>m(r,"front"),className:"hidden",accept:"image/*"}),s.id_card_front&&e("div",{className:"text-red-500 text-sm mt-1",children:s.id_card_front})]}),t("div",{className:"sm:col-span-3",children:[e("label",{className:"block text-sm font-medium text-gray-700",children:"CIN Verso"}),e("div",{onClick:()=>o("back"),className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md cursor-pointer hover:border-green-500",children:e("div",{className:"space-y-1 text-center",children:N?e("img",{src:N,alt:"ID card back preview",className:"mx-auto h-32 w-auto"}):t(g,{children:[e("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),e("div",{className:"flex text-sm text-gray-600",children:e("span",{className:"relative cursor-pointer bg-white rounded-md font-medium text-green-600 hover:text-green-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-green-500",children:"Télécharger un fichier"})}),e("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF jusqu'à 10MB"})]})})}),e("input",{ref:d.back,type:"file",name:"id_card_back",onChange:r=>m(r,"back"),className:"hidden",accept:"image/*"}),s.id_card_back&&e("div",{className:"text-red-500 text-sm mt-1",children:s.id_card_back})]}),t("div",{className:"sm:col-span-3",children:[e("label",{htmlFor:"embauche",className:"block text-sm font-medium text-gray-700",children:"Date d'embauche"}),t("div",{className:"mt-1",children:[e("input",{type:"date",name:"embauche",id:"embauche",value:n.embauche,onChange:r=>i("embauche",r.target.value),className:"shadow-sm focus:ring-green-500 focus:border-green-500 block w-full sm:text-sm border-gray-300 rounded-md"}),s.embauche&&e("div",{className:"text-red-500 text-sm mt-1",children:s.embauche})]})]}),t("div",{className:"sm:col-span-3",children:[e("label",{htmlFor:"depart",className:"block text-sm font-medium text-gray-700",children:"Date de départ"}),t("div",{className:"mt-1",children:[e("input",{type:"date",name:"depart",id:"depart",value:n.depart,onChange:r=>i("depart",r.target.value),className:"shadow-sm focus:ring-green-500 focus:border-green-500 block w-full sm:text-sm border-gray-300 rounded-md"}),s.depart&&e("div",{className:"text-red-500 text-sm mt-1",children:s.depart})]})]})]})]})}),e("div",{className:"pt-5",children:t("div",{className:"flex justify-end space-x-3",children:[e(F,{href:`/edit-employe?restau=${n.restau}`,className:"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Annuler"}),e("button",{type:"submit",disabled:w,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:w?t("div",{className:"flex items-center",children:[t("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Mise à jour..."]}):"Mettre à jour"})]})})]})}),e(y,{})]})}export{M as default};
