import{j as t,r as m,a as r}from"./app-371a344e.js";import{c as x}from"./createLucideIcon-d8c45810.js";/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],w=x("ChevronDown",y),N=(o,l)=>{if(!o||!l)return"";const s=new Date(`${o}T${l}`),c=new Date(s.getTime()+60*60*1e3),n=c.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}),p=c.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit",hour12:!1});return`${n} ${p}`},b=({dateStr:o,timeStr:l})=>t("span",{className:"whitespace-nowrap",children:N(o,l)}),v=({infractions:o,employes:l})=>{const[s,c]=m.useState(""),[n,p]=m.useState(""),[i,g]=m.useState(""),f=o.filter(e=>{let a=!0;return s&&(a=a&&e.employe_id.toString()===s),n&&(a=a&&e.infraction_date>=n),i&&(a=a&&e.infraction_date<=i),a}),h=e=>{e.preventDefault();const a=new URLSearchParams;n&&a.append("date_from",n),i&&a.append("date_to",i),s&&a.append("employe_id",s);const d=`${route("infractions.report")}?${a.toString()}`;window.open(d,"_blank")};return r("div",{className:"mt-12",children:[r("div",{className:"flex flex-col space-y-4 mb-6",children:[t("h2",{className:"text-xl font-semibold text-gray-900",children:"Liste des infractions"}),r("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[r("div",{className:"relative",children:[r("select",{value:s,onChange:e=>c(e.target.value),className:"w-full appearance-none rounded-lg border border-gray-300 px-4 py-2 pr-10 focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white",children:[t("option",{value:"",children:"Tous les employés"}),l.map(e=>r("option",{value:e.id,children:[e.first_name," ",e.last_name]},e.id))]}),t(w,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"})]}),r("form",{onSubmit:h,className:"sm:col-span-3 flex flex-col sm:flex-row gap-2 sm:items-center",children:[t("input",{type:"date",value:n,onChange:e=>p(e.target.value),className:"rounded-lg border border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500"}),t("input",{type:"date",value:i,onChange:e=>g(e.target.value),className:"rounded-lg border border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500"}),t("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:"Générer Rapport"})]})]})]}),t("div",{className:"bg-white rounded-lg shadow",children:t("div",{className:"overflow-x-auto",children:r("table",{className:"min-w-full divide-y divide-gray-200",children:[t("thead",{className:"bg-gray-50",children:r("tr",{children:[t("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Restaurant"}),t("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Poste"}),t("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employé"}),t("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Infraction"}),t("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date/Heure"})]})}),t("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(e=>{var a,d,u;return r("tr",{children:[t("td",{className:"px-6 py-4 whitespace-nowrap",children:e.restaurant}),t("td",{className:"px-6 py-4 whitespace-nowrap",children:e.poste}),t("td",{className:"px-6 py-4",children:r("div",{className:"flex items-center",children:[((a=e.employe)==null?void 0:a.profile_photo)&&t("img",{src:`/storage/${e.employe.profile_photo}`,alt:"",className:"h-8 w-8 rounded-full mr-2 object-cover"}),r("span",{children:[(d=e.employe)==null?void 0:d.first_name," ",(u=e.employe)==null?void 0:u.last_name]})]})}),t("td",{className:"px-6 py-4",children:e.infraction_constatee}),t("td",{className:"px-6 py-4 whitespace-nowrap",children:t(b,{dateStr:e.infraction_date,timeStr:e.infraction_time})})]},e.id)})})]})})})]})},_=v,T=Object.freeze(Object.defineProperty({__proto__:null,default:_},Symbol.toStringTag,{value:"Module"}));export{w as C,_ as I,T as a};
