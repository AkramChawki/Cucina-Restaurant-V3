import{q as f,W as b,j as e,a as o,d as w}from"./app-3b2f67ac.js";import{_}from"./lodash-3e983fa0.js";function j(){const{auth:h}=f().props,x=new URLSearchParams(window.location.search).get("restau"),{data:t,setData:l,post:y,processing:g,errors:z}=b({name:h.user.name,date:"",restau:x,type:"hygiene",moyens:{economat:{economat_salle_ferme:{etat:"non",commentaire:""},economat_chimique_ferme:{etat:"non",commentaire:""},economat_food_ferme:{etat:"non",commentaire:""}},salle:{torchon_salle:{etat:"non",commentaire:""},deobact_salle:{etat:"non",commentaire:""},balai_salle:{etat:"non",commentaire:""},port_tenue_responsable:{etat:"non",commentaire:""},port_tenue_serveur:{etat:"non",commentaire:""},boxs_livreurs:{etat:"non",commentaire:""},poubelle_salle:{etat:"non",commentaire:""}},pizzeria:{port_tenue_pizzaiolo:{etat:"non",commentaire:""},distributeur_essui_main:{etat:"non",commentaire:""},distributeur_savon_pizzeria:{etat:"non",commentaire:""},deobact_pizzeria:{etat:"non",commentaire:""},torchon_pizzeria:{etat:"non",commentaire:""},poubelle_pizzeria:{etat:"non",commentaire:""}},wc_client:{distributeur_savon_wc:{etat:"non",commentaire:""},papier_hygienique_wc_client:{etat:"non",commentaire:""},papier_essui_main_wc_client:{etat:"non",commentaire:""},poubelle_wc_client:{etat:"non",commentaire:""}},cuisine:{port_tenue_cuisinier:{etat:"non",commentaire:""},deobact_cuisine:{etat:"non",commentaire:""},supervix:{etat:"non",commentaire:""},nectal_wc:{etat:"non",commentaire:""},mister_glass:{etat:"non",commentaire:""},javel:{etat:"non",commentaire:""},sanicroix:{etat:"non",commentaire:""},distributeur_savon_plonge:{etat:"non",commentaire:""},distributeur_essui_main_plonge:{etat:"non",commentaire:""},torchon_cuisine:{etat:"non",commentaire:""},poubelle_cuisine:{etat:"non",commentaire:""}},vestiaire:{vestiaire_personnel:{etat:"non",commentaire:""},wc_personnel:{etat:"non",commentaire:""},casiers_ferme:{etat:"non",commentaire:""},douche_personnel:{etat:"non",commentaire:""},papier_hygienique_personnel:{etat:"non",commentaire:""},distributeur_savon_personnel:{etat:"non",commentaire:""},poubelle_vestiaire:{etat:"non",commentaire:""}}},controles:{rangement_economats:{rangement_economat_chimique:{value:"",commentaire:""},rangement_economat_salle:{value:"",commentaire:""},rangement_economat_food:{value:"",commentaire:""}},salle:{proprete_table:{value:"",commentaire:""},proprete_chaise:{value:"",commentaire:""},proprete_tenue_responsable:{value:"",commentaire:""},proprete_tenue_serveur:{value:"",commentaire:""},proprete_bouteilles_huile:{value:"",commentaire:""},proprete_poubelle_salle:{value:"",commentaire:""},proprete_torchon:{value:"",commentaire:""},proprete_boxs_livreurs:{value:"",commentaire:""},proprete_poste_caisse:{value:"",commentaire:""}},poste_pizza:{proprete_comptoir_pizzeria:{value:"",commentaire:""},proprete_tenues_pizzaiolo:{value:"",commentaire:""},proprete_ustensiles_pizzeria:{value:"",commentaire:""},proprete_poubelle_pizzeria:{value:"",commentaire:""},proprete_torchon_pizzeria:{value:"",commentaire:""}},wc_client:{proprete_sol_wc:{value:"",commentaire:""},proprete_sanitaire:{value:"",commentaire:""},proprete_miroir:{value:"",commentaire:""},proprete_poubelle_wc:{value:"",commentaire:""}},cuisine:{proprete_comptoir_chaud:{value:"",commentaire:""},proprete_comptoir_froid:{value:"",commentaire:""},proprete_armoires_positives:{value:"",commentaire:""},proprete_congelateurs:{value:"",commentaire:""},proprete_piano_chaud:{value:"",commentaire:""},proprete_salamander:{value:"",commentaire:""},proprete_micro_onde:{value:"",commentaire:""},proprete_tenues_cuisiniers:{value:"",commentaire:""},proprete_torchon_cuisine:{value:"",commentaire:""}},vestiaire:{controle_odeurs_casiers:{value:"",commentaire:""},controle_proprete_poubelles:{value:"",commentaire:""},controle_proprete_wc_personnel:{value:"",commentaire:""}},facade_terrasse:{proprete_enseigne:{value:"",commentaire:""},proprete_drapeau:{value:"",commentaire:""},proprete_vitres:{value:"",commentaire:""},proprete_jardiniere:{value:"",commentaire:""},proprete_sol_terrasse:{value:"",commentaire:""},proprete_tapis_sol:{value:"",commentaire:""}}}});function v(c){c.preventDefault(),y("/fiche-controle/form",{onError:u=>{console.error(u)}})}const p=(c,u)=>{const s=c.toLowerCase().replace(/ /g,"_");return o("div",{className:"mt-8 overflow-x-auto",children:[e("h3",{className:"text-lg font-medium leading-6 text-gray-900 mb-4",children:c}),o("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[e("thead",{className:"bg-gray-50",children:o("tr",{children:[e("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/4",children:"Moyens"}),e("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-1/6",children:"Etat oui"}),e("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-1/6",children:"Etat non"}),e("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Commentaires"})]})}),e("tbody",{className:"bg-white divide-y divide-gray-200",children:Object.entries(u).map(([r,n])=>o("tr",{children:[e("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 break-words",children:r.split("_").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" ")}),e("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e("input",{type:"radio",name:`etat-${s}-${r}`,checked:n.etat==="oui",onChange:()=>{const a=_.cloneDeep(t);a.moyens[s]&&a.moyens[s][r]&&(a.moyens[s][r].etat="oui",l(a))},className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300"})}),e("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e("input",{type:"radio",name:`etat-${s}-${r}`,checked:n.etat==="non",onChange:()=>{const a=_.cloneDeep(t);a.moyens[s]&&a.moyens[s][r]&&(a.moyens[s][r].etat="non",l(a))},className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300"})}),e("td",{className:"px-6 py-4",children:e("input",{type:"text",value:n.commentaire,onChange:a=>{const i=_.cloneDeep(t);i.moyens[s]&&i.moyens[s][r]&&(i.moyens[s][r].commentaire=a.target.value,l(i))},className:"w-full min-w-0 block border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"})})]},r))})]})]})},m=(c,u)=>{const r=(n=>{switch(n){case"Rangement Economats":return"rangement_economats";case"Poste Pizza":return"poste_pizza";case"WC Client":return"wc_client";case"Facade et Terrasse":return"facade_terrasse";default:return n.toLowerCase()}})(c);return o("div",{className:"mt-8 overflow-x-auto",children:[e("h3",{className:"text-lg font-medium leading-6 text-gray-900 mb-4",children:c}),o("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[e("thead",{className:"bg-gray-50",children:o("tr",{children:[e("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/4",children:"Désignation des contrôles"}),["bien","moyen","mediocre","neant"].map(n=>e("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-1/12",children:n},n)),e("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Commentaires"})]})}),e("tbody",{className:"bg-white divide-y divide-gray-200",children:Object.entries(u).map(([n,a])=>o("tr",{children:[e("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 break-words",children:n.split("_").map(i=>i.charAt(0).toUpperCase()+i.slice(1)).join(" ")}),["bien","moyen","mediocre","neant"].map(i=>e("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e("input",{type:"radio",name:`rating-${r}-${n}`,checked:a.value===i,onChange:()=>{const d=_.cloneDeep(t);d.controles[r][n].value=i,l(d)},className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300"})},i)),e("td",{className:"px-6 py-4",children:e("input",{type:"text",value:a.commentaire,onChange:i=>{const d=_.cloneDeep(t);d.controles[r][n].commentaire=i.target.value,l(d)},className:"w-full min-w-0 block border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"})})]},n))})]})]})};return e("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 px-4 py-10",children:e("form",{onSubmit:v,className:"space-y-8",children:o("div",{className:"space-y-6",children:[e("div",{className:"flex justify-between items-start",children:o("div",{children:[e("h2",{className:"text-xl font-semibold",children:"Fiche contrôle hygiène"}),o("div",{className:"mt-4 space-y-4",children:[o("div",{className:"flex space-x-4 items-center",children:[e("label",{className:"block text-sm font-medium text-gray-700",children:"Date"}),e("input",{type:"date",value:t.date,onChange:c=>l("date",c.target.value),className:"shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm border-gray-300 rounded-md"})]}),o("div",{className:"flex space-x-4 items-center",children:[e("label",{className:"block text-sm font-medium text-gray-700",children:"Restaurant"}),e("input",{type:"text",value:t.restau,disabled:!0,className:"shadow-sm bg-gray-50 sm:text-sm border-gray-300 rounded-md"})]})]})]})}),p("Economat",t.moyens.economat),p("Salle",t.moyens.salle),p("Pizzeria",t.moyens.pizzeria),p("WC Client",t.moyens.wc_client),p("Cuisine",t.moyens.cuisine),p("Vestiaire",t.moyens.vestiaire),m("Rangement Economats",t.controles.rangement_economats),m("Salle",t.controles.salle),m("Poste Pizza",t.controles.poste_pizza),m("WC Client",t.controles.wc_client),m("Cuisine",t.controles.cuisine),m("Vestiaire",t.controles.vestiaire),m("Facade et Terrasse",t.controles.facade_terrasse),o("div",{className:"pt-8 flex justify-end space-x-3",children:[e(w,{href:"/",className:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Annuler"}),e("button",{type:"submit",disabled:g,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:g?"Enregistrement...":"Enregistrer"})]})]})})})}export{j as default};
