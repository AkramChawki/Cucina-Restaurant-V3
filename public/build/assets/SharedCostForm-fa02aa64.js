import{r as b,a as r,j as a,f as N}from"./app-d6080215.js";function w({title:f,routeName:p,restaurant:o,products:c,currentMonth:d}){const[n,v]=b.useState(new Date(d.year,d.month-1)),m=Array.from({length:new Date(n.getFullYear(),n.getMonth()+1,0).getDate()},(e,t)=>t+1),g=(e,t)=>{const l=parseFloat(s(e,t,"morning"))||0,i=parseFloat(s(e,t,"afternoon"))||0;return(l+i)*(e.prix||0)},h=e=>c.reduce((t,l)=>t+g(l,e),0),x=(e,t,l,i)=>{N.post(route(p),{restaurant_id:o.id,product_id:e,day:t,month:n.getMonth()+1,year:n.getFullYear(),period:l,value:i||0,day_total:h(t)},{preserveScroll:!0,preserveState:!0})},u=e=>{e.target.blur()},s=(e,t,l)=>!e.values||!e.values[t]?"":e.values[t][l]||"";return r("div",{className:"flex flex-col h-full",children:[a("div",{className:"bg-white p-4 border-b shadow-sm",children:r("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 max-w-7xl mx-auto",children:[r("div",{children:[a("h1",{className:"text-xl font-semibold text-gray-900",children:f}),r("p",{className:"text-sm text-gray-600",children:[o.name," - ",n.toLocaleDateString("fr-FR",{month:"long",year:"numeric"})]})]}),a("input",{type:"month",value:`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`,onChange:e=>v(new Date(e.target.value)),className:"border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500"})]})}),r("div",{className:"relative flex-1 overflow-hidden",children:[a("div",{className:"absolute left-0 top-0 bottom-0 w-4 bg-gradient-to-r from-white to-transparent z-10 pointer-events-none"}),a("div",{className:"absolute right-0 top-0 bottom-0 w-4 bg-gradient-to-l from-white to-transparent z-10 pointer-events-none"}),a("div",{className:"overflow-x-auto overflow-y-auto h-full",children:r("table",{className:"w-full border-collapse min-w-max",children:[a("thead",{className:"bg-gray-50 sticky top-0 z-20",children:r("tr",{children:[a("th",{className:"sticky left-0 z-30 bg-gray-50 px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[240px]",children:"Produit"}),m.map(e=>r("th",{className:"px-3 py-3 text-center border-x",children:[a("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:e}),r("div",{className:"text-sm font-semibold text-green-600",children:[h(e).toFixed(2),"€"]}),r("div",{className:"grid grid-cols-2 gap-2 mt-1",children:[a("div",{className:"text-xs text-gray-500",children:"Matin"}),a("div",{className:"text-xs text-gray-500",children:"Midi"})]})]},e))]})}),a("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(e=>r("tr",{className:"hover:bg-gray-50",children:[a("td",{className:"sticky left-0 bg-white border-r px-6 py-4 whitespace-nowrap z-20 hover:bg-gray-50",children:r("div",{className:"flex items-center gap-3",children:[a("img",{src:`https://admin.cucinanapoli.com/storage/${e.image}`,alt:e.designation,className:"h-12 w-12 object-cover rounded-md"}),r("div",{className:"flex flex-col",children:[a("span",{className:"text-sm font-medium text-gray-900",children:e.designation}),r("span",{className:"text-xs text-gray-500",children:[e.prix,"€/",e.unite]})]})]})}),m.map(t=>a("td",{className:"px-1 py-2 border-x",children:r("div",{className:"flex flex-col gap-1",children:[r("div",{className:"grid grid-cols-2 gap-1",children:[a("input",{type:"number",className:"w-full border-gray-300 rounded-sm focus:ring-green-500 focus:border-green-500 text-sm p-1",value:s(e,t,"morning"),onChange:l=>x(e.id,t,"morning",l.target.value),onWheel:u,step:"0.01",min:"0",placeholder:"0"}),a("input",{type:"number",className:"w-full border-gray-300 rounded-sm focus:ring-green-500 focus:border-green-500 text-sm p-1",value:s(e,t,"afternoon"),onChange:l=>x(e.id,t,"afternoon",l.target.value),onWheel:u,step:"0.01",min:"0",placeholder:"0"})]}),r("div",{className:"text-xs text-right text-gray-600 pr-1",children:[g(e,t).toFixed(2),"€"]})]})},t))]},e.id))})]})})]})]})}export{w as default};
