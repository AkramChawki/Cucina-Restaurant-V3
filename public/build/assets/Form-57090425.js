import{r,j as d,a as e,g as b}from"./app-b84e4b3b.js";function N({restaurant:t,presences:h,currentMonth:a}){const c=new Date,i={month:c.getMonth()+1,year:c.getFullYear()},[m,g]=r.useState((t==null?void 0:t.slug)||""),[o,v]=r.useState(new Date((a==null?void 0:a.year)||i.year,((a==null?void 0:a.month)||i.month)-1)),p=Array.from({length:new Date(o.getFullYear(),o.getMonth()+1,0).getDate()},(l,n)=>n+1),u=(l,n,s)=>{b.post(route("employes.updateAttendance"),{employe_id:l,day:n,status:s,month:o.getMonth()+1,year:o.getFullYear()},{preserveScroll:!0,preserveState:!0})};return d("div",{className:"p-6",children:[d("div",{className:"mb-6 flex gap-4 items-center",children:[e("select",{value:m,onChange:l=>g(l.target.value),className:"border rounded px-3 py-2",children:e("option",{value:(t==null?void 0:t.slug)||"",children:(t==null?void 0:t.name)||"Select Restaurant"})}),e("input",{type:"month",value:`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}`,onChange:l=>v(new Date(l.target.value)),className:"border rounded px-3 py-2"})]}),e("div",{className:"overflow-x-auto",children:d("table",{className:"w-full border-collapse bg-white",children:[e("thead",{children:d("tr",{className:"bg-gray-50",children:[e("th",{className:"border px-4 py-2 text-left",children:"ID"}),e("th",{className:"border px-4 py-2 text-left",children:"Nom"}),p.map(l=>e("th",{className:"border px-4 py-2 text-center w-12",children:l},l))]})}),e("tbody",{children:h.map(({employe:l,presence:n})=>d("tr",{children:[e("td",{className:"border px-4 py-2",children:l.id}),e("td",{className:"border px-4 py-2",children:`${l.first_name} ${l.last_name}`}),p.map(s=>e("td",{className:"border px-2 py-1",children:d("select",{value:n.attendance_data[s]||"",onChange:x=>u(l.id,s,x.target.value),className:"w-full border rounded px-2 py-1 text-sm",children:[e("option",{value:"",children:"-"}),e("option",{value:"present",children:"P"}),e("option",{value:"absent",children:"A"}),e("option",{value:"conge-paye",children:"CP"}),e("option",{value:"conge-non-paye",children:"CNP"}),e("option",{value:"repos",children:"R"}),e("option",{value:"continue",children:"CC"})]})},s))]},l.id))})]})})]})}export{N as default};
